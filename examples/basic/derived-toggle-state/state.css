/* State-driven styles using CSS variables for derived state */

/* Custom properties for tracking state */
:root {
    /* We'll use these to track the numeric state (1 for on, 0 for off) */
    --uis-feature-a-active: 0;
    --uis-feature-b-active: 0;
    --uis-feature-c-active: 0;
    
    /* Derived state: are all features enabled? (1 if true, 0 if false) */
    --uis-all-features-enabled: calc(var(--uis-feature-a-active) * var(--uis-feature-b-active) * var(--uis-feature-c-active));
    
    /* Derived state: how many features are enabled? (0-3) */
    --uis-enabled-feature-count: calc(var(--uis-feature-a-active) + var(--uis-feature-b-active) + var(--uis-feature-c-active));
    
    /* Derived state: progress percentage (0-100%) */
    --uis-progress-percentage: calc(var(--uis-enabled-feature-count) * 33.33%);
}

/* Individual toggle button states */
.feature-toggle[data-uis-state="on"] {
    background-color: #28a745;
    color: white;
}

.feature-toggle[data-uis-state="off"] {
    background-color: #e9ecef;
    color: #495057;
}

/* System status indicator based on all-features-enabled state */
.status-indicator {
    background-color: hsl(calc(120 * var(--uis-all-features-enabled)), 70%, 45%);
}

/* Status text changes based on all-features-enabled state */
.status-text::after {
    content: var(--uis-all-features-enabled) ? " (All Features Enabled)" : " (Some Features Disabled)";
}

/* Progress bar width based on enabled feature count */
.progress-bar {
    width: var(--uis-progress-percentage);
    background-color: hsl(calc(120 * var(--uis-enabled-feature-count) / 3), 70%, 45%);
}

/* Progress text shows count of enabled features */
.progress-text::after {
    content: " (" attr(data-uis-count) "/3)";
}

/* Update the data-count attribute based on the CSS variable */
.progress-text {
    counter-reset: feature-count var(--uis-enabled-feature-count);
}

.progress-text::before {
    counter-increment: feature-count;
    content: "";
}

/* Set the data-count attribute using JavaScript */
.progress-indicator {
    position: relative;
}

/* We'll use JavaScript to update this */
.progress-text[data-uis-count="0"], .progress-text[data-uis-count="1"], .progress-text[data-uis-count="2"], .progress-text[data-uis-count="3"] {
    /* This selector exists to ensure the attribute is recognized */
}

/* Container styling based on enabled feature count */
.status-container {
    border-left: 4px solid hsl(calc(120 * var(--uis-enabled-feature-count) / 3), 70%, 45%);
}
